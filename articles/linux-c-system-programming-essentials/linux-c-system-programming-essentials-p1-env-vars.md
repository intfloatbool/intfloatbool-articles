## 4. Чтение переменных среды

Переменные среды (Environment Variables) используются для передачи программе неких значений, которые ей могут понадобиться. В системе определены стандартные переменные - ```PATH```, ```HOME```, ```USER``` и так далее. Мы также можем сами устанавливать переменные в оболочке, через команду:

```bash
export MY_VARIABLE=blablabla
```

Таким образом будет установлена переменная с именем ```MY_VARIABLE``` со значением ```blablabla```. 

Просмотреть значения текущих переменных можно из терминала:
```bash
echo $VARIABLE
```

Например, мы хотим узнать значение переменной ```HOME```:

```bash
echo $HOME
```

### Программа
```print_env```

### Что делает 
Выводит на экран значения трех переменных:
- ```MY_ENV``` - наша собственная переменная, которую можно установить с помощью команды ```export```.
- ```HOME``` - системная переменная, которая хранит в себе путь пользовательского каталога ```/home/username```.
- ```USER``` - системная переменная, которая хранит в себе имя текущего пользователя системы ```username```.

Значения переменных вытаскиваются с помощью функции ```getenv()```.

> **Пример выполнения**
> ```bash
> ./print_env 
> 'MY_ENV' value: (null)      # значение null, так как такой переменной еще не существует.
> 'HOME' value: /home/intfloatbool
> 'USER' value: intfloatbool
>
> #### 
> 
> export MY_ENV=mamamabobobo    # заводим переменную MY_ENV перед следующим запуском 
> 
> ./print_env
> 'MY_ENV' value: mamamabobobo  # теперь программа имеет значение MY_ENV
> 'HOME' value: /home/intfloatbool
> 'USER' value: intfloatbool
>
> ```

### Что внутри
- получаем значения переменных с помощью функции ```getenv()```.
- выводим на экран эти значения.

### Исходный код
```print_env.c```  

[Ссылка](./code_sources/linux-c-system-programming-essentials/3-environment-variables/print_env.c)

### Пояснения

#### Подключение необходимых заголовков
```c
#include <stdio.h>
#include <stdlib.h>
```
- **stdio.h** - обработка ввода/вывода , выводим на экран сообщения с помощью функции вывода ```printf()```.
-  **stdlib.h** - стандартная библиотека, используем функцию ```getenv()``` и выход из программы функцией ```exit()```.


#### Чтение переменной среды
```c
char* custom_env = getenv("MY_ENV");
char* home_env = getenv("HOME");
char* user_env = getenv("USER");
```

Создаем строковые переменные ```char*``` и сохраняем их значение из функции ```getenv()```.

Функция ```getenv()``` принимает параметр - имя переменной. В нашем случае мы получаем значения трех переменных по ключу:
1. ```MY_ENV``` - наша пользовательская переменная, она может быть или не быть (null).
2. ```HOME``` - системная переменная для получения пути домашнего каталога.
3. ```USER``` - системная переменная для получения имени пользователя системы.

#### Вывод значений переменных на экран
```c
printf("'MY_ENV' value: %s\n", custom_env);
printf("'HOME' value: %s\n", home_env);
printf("'USER' value: %s\n", user_env);
```

#### Успешный выход из программы
```c
exit(0);
```
**[Следующая статья](linux-c-system-programming-essentials-p2-compilation.md)**